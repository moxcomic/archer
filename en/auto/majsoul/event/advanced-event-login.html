<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.15" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>Advanced - Mahjong Event Login | Archer</title><meta name="description" content="Archer is a Mahjong game development framework based on the Go programming language.">
    <link rel="preload" href="/archer/assets/style-Bms-cid0.css" as="style"><link rel="stylesheet" href="/archer/assets/style-Bms-cid0.css">
    <link rel="modulepreload" href="/archer/assets/app-BI1YvGVI.js"><link rel="modulepreload" href="/archer/assets/advanced-event-login.html-O9XZ0eQZ.js">
    <link rel="prefetch" href="/archer/assets/index.html-DUxM2sYS.js" as="script"><link rel="prefetch" href="/archer/assets/index.html-C9GkI1mY.js" as="script"><link rel="prefetch" href="/archer/assets/index.html-5_BUfcar.js" as="script"><link rel="prefetch" href="/archer/assets/basic-framework.html-Doe0rTpd.js" as="script"><link rel="prefetch" href="/archer/assets/basics.html-Bzd8PTpA.js" as="script"><link rel="prefetch" href="/archer/assets/about.html-DSfaFjJj.js" as="script"><link rel="prefetch" href="/archer/assets/contact-us.html-D4Pc9Hbn.js" as="script"><link rel="prefetch" href="/archer/assets/faq.html-B-PeuUKu.js" as="script"><link rel="prefetch" href="/archer/assets/get-started.html-D1BzL8jS.js" as="script"><link rel="prefetch" href="/archer/assets/basic-make-resource-plugin.html-CNmsQ9La.js" as="script"><link rel="prefetch" href="/archer/assets/basic-plugin.html-Bb1s__U5.js" as="script"><link rel="prefetch" href="/archer/assets/basic-review.html-BxrgrAvg.js" as="script"><link rel="prefetch" href="/archer/assets/basic-room-mortal.html-DT4AAv2C.js" as="script"><link rel="prefetch" href="/archer/assets/basic-framework.html-DyQmPCHD.js" as="script"><link rel="prefetch" href="/archer/assets/basics.html-C2xB9zRG.js" as="script"><link rel="prefetch" href="/archer/assets/basic-make-resource-plugin.html-COzV24Pg.js" as="script"><link rel="prefetch" href="/archer/assets/basic-plugin.html-506pdTN-.js" as="script"><link rel="prefetch" href="/archer/assets/about.html-CrjffxqB.js" as="script"><link rel="prefetch" href="/archer/assets/contact-us.html-C9sp9GTK.js" as="script"><link rel="prefetch" href="/archer/assets/faq.html-LNZWHsii.js" as="script"><link rel="prefetch" href="/archer/assets/get-started.html-B2rp10DH.js" as="script"><link rel="prefetch" href="/archer/assets/basic-review.html-D7nViLmq.js" as="script"><link rel="prefetch" href="/archer/assets/basic-room-mortal.html-CZIe9ck9.js" as="script"><link rel="prefetch" href="/archer/assets/basic-action-majsoul.html-Bqp4vGas.js" as="script"><link rel="prefetch" href="/archer/assets/basic-action-type.html-CDKGpcaH.js" as="script"><link rel="prefetch" href="/archer/assets/advanced-action-discard.html-B-MyrMD3.js" as="script"><link rel="prefetch" href="/archer/assets/basic-action-cancel.html-9e4wn2Px.js" as="script"><link rel="prefetch" href="/archer/assets/basic-action-chii.html-CwIxkNmU.js" as="script"><link rel="prefetch" href="/archer/assets/basic-action-discard.html-Cxb8HRK-.js" as="script"><link rel="prefetch" href="/archer/assets/basic-action-gang.html-CwUythwY.js" as="script"><link rel="prefetch" href="/archer/assets/basic-action-pon.html-Co4F3PnF.js" as="script"><link rel="prefetch" href="/archer/assets/advanced-event-login.html-CIGNIVrR.js" as="script"><link rel="prefetch" href="/archer/assets/basic-event-login.html-BQFR2hfk.js" as="script"><link rel="prefetch" href="/archer/assets/basic-gamestate.html-Ctk4fOGH.js" as="script"><link rel="prefetch" href="/archer/assets/advanced-action-discard.html-DS9ibnxt.js" as="script"><link rel="prefetch" href="/archer/assets/basic-action-cancel.html-m_ivnMYo.js" as="script"><link rel="prefetch" href="/archer/assets/basic-action-chii.html-Cs4b4N3x.js" as="script"><link rel="prefetch" href="/archer/assets/basic-action-discard.html-Cbm_WWnl.js" as="script"><link rel="prefetch" href="/archer/assets/basic-action-gang.html-D969b2R8.js" as="script"><link rel="prefetch" href="/archer/assets/basic-action-pon.html-DaZt8Itl.js" as="script"><link rel="prefetch" href="/archer/assets/basic-lq.html-KkFMkGLZ.js" as="script"><link rel="prefetch" href="/archer/assets/mgr-lobby.html-BXFHX406.js" as="script"><link rel="prefetch" href="/archer/assets/basic-tile.html-BTLFkKJy.js" as="script"><link rel="prefetch" href="/archer/assets/basic-action-type.html-B66MZDuT.js" as="script"><link rel="prefetch" href="/archer/assets/basic-action-majsoul.html-DTL01pFS.js" as="script"><link rel="prefetch" href="/archer/assets/basic-lq.html-Dlhix44I.js" as="script"><link rel="prefetch" href="/archer/assets/basic-gamestate.html-Bvd-8uBv.js" as="script"><link rel="prefetch" href="/archer/assets/basic-event-login.html-nanj1lD6.js" as="script"><link rel="prefetch" href="/archer/assets/mgr-lobby.html-BsuGCOlE.js" as="script"><link rel="prefetch" href="/archer/assets/basic-tile.html-BRXxRU7N.js" as="script"><link rel="prefetch" href="/archer/assets/404.html-PrT0F3St.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/archer/en/"><img class="vp-site-logo" src="/archer/image/logo.png" alt="Archer"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Archer</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/archer/en/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/archer/en/guide/get-started.html" aria-label="Get Started"><!---->Get Started<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/archer/en/guide/about.html" aria-label="Project Introduction"><!---->Project Introduction<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/archer/zh/auto/majsoul/event/advanced-event-login.html" aria-label="简体中文"><!---->简体中文<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/archer/en/auto/majsoul/event/advanced-event-login.html" aria-label="English"><!---->English<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style="display:none;"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style=""><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/archer/en/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/archer/en/guide/get-started.html" aria-label="Get Started"><!---->Get Started<!----></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/archer/en/guide/about.html" aria-label="Project Introduction"><!---->Project Introduction<!----></a></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="vp-navbar-dropdown"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/archer/zh/auto/majsoul/event/advanced-event-login.html" aria-label="简体中文"><!---->简体中文<!----></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/archer/en/auto/majsoul/event/advanced-event-login.html" aria-label="English"><!---->English<!----></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/archer/en/" aria-label="Home"><!---->Home<!----></a><!----></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Basic Configuration <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/guide/about.html" aria-label="Project Introduction"><!---->Project Introduction<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/guide/get-started.html" aria-label="Get Started"><!---->Get Started<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/guide/faq.html" aria-label="FAQ"><!---->FAQ<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/guide/contact-us.html" aria-label="Contact Us"><!---->Contact Us<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active collapsible">Advanced Development <span class="down arrow"></span></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/auto/basics.html" aria-label="Basic Knowledge"><!---->Basic Knowledge<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/auto/basic-framework.html" aria-label="Basic Framework"><!---->Basic Framework<!----></a><!----></li><li><p tabindex="0" class="vp-sidebar-item active collapsible">Majsoul Development <span class="down arrow"></span></p><ul style="" class="vp-sidebar-children"><!--[--><li><p tabindex="0" class="vp-sidebar-item collapsible">Tile Names <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/auto/majsoul/tile/basic-tile.html" aria-label="Basic"><!---->Basic<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">Manager <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/auto/majsoul/mgr/mgr-lobby.html" aria-label="Lobby Manager"><!---->Lobby Manager<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">Game Interfaces <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/auto/majsoul/actions/basic-action-majsoul.html" aria-label="Basic"><!---->Basic<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">LQ <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/auto/majsoul/lq/basic-lq.html" aria-label="Basic"><!---->Basic<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">Action Types <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/auto/majsoul/action_type/basic-action-type.html" aria-label="Basic"><!---->Basic<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">Game State <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/auto/majsoul/gamestate/basic-gamestate.html" aria-label="Basic"><!---->Basic<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item active collapsible">Login Event <span class="down arrow"></span></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/auto/majsoul/event/basic-event-login.html" aria-label="Login Event"><!---->Login Event<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/archer/en/auto/majsoul/event/advanced-event-login.html" aria-label="Advanced - Mahjong Event Login"><!---->Advanced - Mahjong Event Login<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item collapsible">Discard Actions <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/auto/majsoul/action/basic-action-discard.html" aria-label="Basics"><!---->Basics<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/auto/majsoul/action/advanced-action-discard.html" aria-label="Advanced"><!---->Advanced<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/auto/majsoul/action/basic-action-chii.html" aria-label="Chii (Eat)"><!---->Chii (Eat)<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/auto/majsoul/action/basic-action-pon.html" aria-label="Pon"><!---->Pon<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/auto/majsoul/action/basic-action-gang.html" aria-label="Kong"><!---->Kong<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/auto/majsoul/action/basic-action-cancel.html" aria-label="Cancel, Skip"><!---->Cancel, Skip<!----></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Plugin System <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/plugin/basic-plugin.html" aria-label="Basic Usage"><!---->Basic Usage<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/plugin/basic-make-resource-plugin.html" aria-label="Resource Plugin Development"><!---->Resource Plugin Development<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Auto Review <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/review/basic-review.html" aria-label="Automatic Review"><!---->Automatic Review<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Tenhou Room <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/archer/en/tenhou/basic-room-mortal.html" aria-label="Playing in Tenhou Private Room with Mortal Bot"><!---->Playing in Tenhou Private Room with Mortal Bot<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h1 id="basic-review" tabindex="-1"><a class="header-anchor" href="#basic-review"><span>Basic Review</span></a></h1><p>In the previous section, we introduced the basic callback function for Mahjong event login. However, in real game scenarios, when this is invoked, it is not certain whether the player has already entered the game lobby. Further checks are needed to determine whether the player has entered the game and if the game has started.</p><h1 id="how-to-determine" tabindex="-1"><a class="header-anchor" href="#how-to-determine"><span>How to Determine</span></a></h1><p>The <a href="/archer/en/auto/majsoul/mgr/mgr-lobby">lobbymgr</a> library provides game status information that can help you determine the current state of the game.</p><h1 id="example-code" tabindex="-1"><a class="header-anchor" href="#example-code"><span>Example Code</span></a></h1><div class="language-golang line-numbers-mode" data-highlighter="prismjs" data-ext="golang" data-title="golang"><pre><code><span class="line">package main</span>
<span class="line"></span>
<span class="line">import (</span>
<span class="line">  &quot;github.com/moxcomic/Archer/mgr/lobbymgr&quot;</span>
<span class="line">)</span>
<span class="line"></span>
<span class="line">func onLogin() {</span>
<span class="line">  if lobbymgr.Inst.Enable() {</span>
<span class="line">    // 在游戏大厅页面</span>
<span class="line">    // On the game lobby page</span>
<span class="line">  } else {</span>
<span class="line">    // 不在游戏大厅页面</span>
<span class="line">    // Not on the game lobby page</span>
<span class="line">  }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="advanced-code" tabindex="-1"><a class="header-anchor" href="#advanced-code"><span>Advanced Code</span></a></h1><ul><li>The code above only checks once whether the player is on the lobby page, but entering the lobby is not instantaneous. Therefore, we need to use a loop to continuously check.</li></ul><div class="language-golang line-numbers-mode" data-highlighter="prismjs" data-ext="golang" data-title="golang"><pre><code><span class="line">package main</span>
<span class="line"></span>
<span class="line">import (</span>
<span class="line">  &quot;github.com/moxcomic/Archer/mgr/lobbymgr&quot;</span>
<span class="line">)</span>
<span class="line"></span>
<span class="line">func onLogin() {</span>
<span class="line">  for range time.Tick(time.Second) {</span>
<span class="line">    if !lobbymgr.Inst().Enable() {</span>
<span class="line">      fmt.Println(&quot;Waiting to enter the lobby...&quot;)</span>
<span class="line">      continue</span>
<span class="line">    }</span>
<span class="line"></span>
<span class="line">    break</span>
<span class="line">  }</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>Of course, this is just an example. The specific game logic needs to be determined based on the actual situation.</li></ul></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><!----><!----></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/archer/en/auto/majsoul/event/basic-event-login.html" aria-label="Login Event"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>Login Event</span></div></a><!----></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/archer/assets/app-BI1YvGVI.js" defer></script>
  </body>
</html>
