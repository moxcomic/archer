import{_ as d,c as e,a,o as r}from"./app-C7TwiyNB.js";const n={};function o(i,t){return r(),e("div",null,[...t[0]||(t[0]=[a('<h1 id="package-name" tabindex="-1"><a class="header-anchor" href="#package-name"><span>Package Name</span></a></h1><ul><li><code>gamestate</code></li></ul><h1 id="import" tabindex="-1"><a class="header-anchor" href="#import"><span>Import</span></a></h1><ul><li><code>import &quot;github.com/moxcomic/Archer/gamestate&quot;</code></li></ul><h1 id="constants" tabindex="-1"><a class="header-anchor" href="#constants"><span>Constants</span></a></h1><table><thead><tr><th>Name</th><th>Type</th><th>Value</th><th>Notes</th></tr></thead><tbody><tr><td>RoundEndReasonHule</td><td>RoundEndReason</td><td>0</td><td>Round ended by win (<code>hule</code>)</td></tr><tr><td>RoundEndReasonRyuukyoku</td><td>RoundEndReason</td><td>1</td><td>Round ended by draw (<code>ryuukyoku</code>)</td></tr></tbody></table><h1 id="types" tabindex="-1"><a class="header-anchor" href="#types"><span>Types</span></a></h1><h2 id="roundendreason" tabindex="-1"><a class="header-anchor" href="#roundendreason"><span>RoundEndReason</span></a></h2><table><thead><tr><th>Name</th><th>Type</th><th>Notes</th></tr></thead><tbody><tr><td>RoundEndReason</td><td><code>int</code> alias</td><td>Round end reason enum</td></tr></tbody></table><h2 id="roundend" tabindex="-1"><a class="header-anchor" href="#roundend"><span>RoundEnd</span></a></h2><table><thead><tr><th>Name</th><th>Type</th><th>Notes</th></tr></thead><tbody><tr><td>Reason</td><td>RoundEndReason</td><td>Reason for round end</td></tr><tr><td>Deltas</td><td>[]int</td><td>Score changes for players, <code>[0]</code> is self</td></tr><tr><td>Hules</td><td>[]*Hules</td><td>Win data list</td></tr></tbody></table><h2 id="hules" tabindex="-1"><a class="header-anchor" href="#hules"><span>Hules</span></a></h2><table><thead><tr><th>Name</th><th>Type</th><th>Notes</th></tr></thead><tbody><tr><td>Seat</td><td>int</td><td>Seat number, <code>[0]</code> is self</td></tr><tr><td>Tsumo</td><td>bool</td><td>Self-draw win</td></tr><tr><td>Point</td><td>int</td><td>Points earned</td></tr></tbody></table><h2 id="tsumogiri" tabindex="-1"><a class="header-anchor" href="#tsumogiri"><span>Tsumogiri</span></a></h2><table><thead><tr><th>Name</th><th>Type</th><th>Notes</th></tr></thead><tbody><tr><td>Tile</td><td>string</td><td>Tile name</td></tr><tr><td>Tsumogiri</td><td>bool</td><td>Whether discard is tsumogiri</td></tr></tbody></table><h1 id="package-functions" tabindex="-1"><a class="header-anchor" href="#package-functions"><span>Package Functions</span></a></h1><table><thead><tr><th>Name</th><th>Parameters</th><th>Return Value</th><th>Notes</th></tr></thead><tbody><tr><td>Inst</td><td>None</td><td>*gamestate.GameState</td><td>GameState singleton instance</td></tr></tbody></table><h1 id="instance-methods" tabindex="-1"><a class="header-anchor" href="#instance-methods"><span>Instance Methods</span></a></h1><p>All methods below are from <code>*gamestate.GameState</code>.</p><h2 id="common-getters" tabindex="-1"><a class="header-anchor" href="#common-getters"><span>Common Getters</span></a></h2><table><thead><tr><th>Name</th><th>Parameters</th><th>Return Value</th><th>Notes</th></tr></thead><tbody><tr><td>GetChang</td><td>None</td><td>int</td><td>Current chang (round wind index)</td></tr><tr><td>GetJu</td><td>None</td><td>int</td><td>Current ju</td></tr><tr><td>GetLeftTileCount</td><td>None</td><td>int</td><td>Remaining tile count</td></tr><tr><td>GetLatestGlobalDiscardAt</td><td>None</td><td>[]int</td><td>Latest global discard index per seat</td></tr><tr><td>GetEarlyOutside</td><td>None</td><td>[][]string</td><td>Early outside tiles per seat</td></tr><tr><td>GetRanking</td><td>None</td><td>int</td><td>Current rank, zero-based</td></tr></tbody></table><h2 id="hand" tabindex="-1"><a class="header-anchor" href="#hand"><span>Hand</span></a></h2><table><thead><tr><th>Name</th><th>Parameters</th><th>Return Value</th><th>Notes</th></tr></thead><tbody><tr><td>GetHandTile</td><td>None</td><td>[]string</td><td>Hand tiles</td></tr><tr><td>AddHandTile</td><td>init bool, v ...string</td><td>None</td><td>Append tiles; sort always, and re-sort when <code>init=true</code></td></tr><tr><td>RemoveHandTile</td><td>v string</td><td>None</td><td>Remove one matching tile</td></tr><tr><td>RemoveHandTiles</td><td>v ...string</td><td>None</td><td>Remove each tile once</td></tr><tr><td>RemoveHandTiles4</td><td>v string</td><td>None</td><td>Remove up to 4 copies across normal/aka/deaka</td></tr><tr><td>ResetHandTile</td><td>None</td><td>None</td><td>Clear hand tiles</td></tr><tr><td>SortHandTile</td><td>None</td><td>None</td><td>Sort tiles by internal tile order</td></tr></tbody></table><h2 id="discards" tabindex="-1"><a class="header-anchor" href="#discards"><span>Discards</span></a></h2><table><thead><tr><th>Name</th><th>Parameters</th><th>Return Value</th><th>Notes</th></tr></thead><tbody><tr><td>GetDiscardTile</td><td>None</td><td>[][]string</td><td>Discard tiles for 4 seats</td></tr><tr><td>AddDiscardTile</td><td>index int, v ...string</td><td>None</td><td>Append discard(s) to seat <code>index</code></td></tr><tr><td>RemoveDiscardTile</td><td>index int, v string</td><td>None</td><td>Remove one matching discard from seat <code>index</code></td></tr><tr><td>RemoveDiscardTiles</td><td>index int, v ...string</td><td>None</td><td>Remove each discard once</td></tr><tr><td>RemoveDiscardTiles4</td><td>index int, v string</td><td>None</td><td>Remove up to 4 copies across normal/aka/deaka</td></tr><tr><td>ResetDiscardTile</td><td>None</td><td>None</td><td>Clear all discard piles</td></tr></tbody></table><h2 id="left-tile-streams" tabindex="-1"><a class="header-anchor" href="#left-tile-streams"><span>Left Tile Streams</span></a></h2><table><thead><tr><th>Name</th><th>Parameters</th><th>Return Value</th><th>Notes</th></tr></thead><tbody><tr><td>GetLeftTile</td><td>None</td><td>[]string</td><td>Current round left-tile stream</td></tr><tr><td>GetGlobalLeftTile</td><td>None</td><td>[]string</td><td>Global left-tile stream</td></tr><tr><td>AddLeftTile</td><td>v ...string</td><td>None</td><td>Append to both <code>LeftTile</code> and <code>GlobalLeftTile</code></td></tr><tr><td>ResetLeftTile</td><td>None</td><td>None</td><td>Clear both streams</td></tr><tr><td>UndoLeftTile</td><td>None</td><td>None</td><td>Remove latest tile from <code>LeftTile</code> only</td></tr><tr><td>ResetLeftTileCount</td><td>left int</td><td>None</td><td>Reset remaining tile count</td></tr><tr><td>UpdateLeftTileCount</td><td>None</td><td>None</td><td><code>LeftTileCount--</code></td></tr></tbody></table><h2 id="dora" tabindex="-1"><a class="header-anchor" href="#dora"><span>Dora</span></a></h2><table><thead><tr><th>Name</th><th>Parameters</th><th>Return Value</th><th>Notes</th></tr></thead><tbody><tr><td>GetDora</td><td>None</td><td>[]string</td><td>Dora indicators</td></tr><tr><td>AddDora</td><td>v ...string</td><td>None</td><td>Append dora indicator(s)</td></tr><tr><td>SetDora</td><td>v ...string</td><td>None</td><td>Replace dora indicators</td></tr><tr><td>RemoveDora</td><td>v string</td><td>None</td><td>Remove one matching dora indicator</td></tr><tr><td>RemoveDoras</td><td>v ...string</td><td>None</td><td>Remove each indicator once</td></tr><tr><td>RemoveDoras4</td><td>v string</td><td>None</td><td>Remove up to 4 copies across normal/aka/deaka</td></tr><tr><td>ResetDora</td><td>None</td><td>None</td><td>Clear dora indicators</td></tr><tr><td>CalcDoraCount</td><td>None</td><td>int</td><td>Count dora in hand and open melds</td></tr></tbody></table><h2 id="meld" tabindex="-1"><a class="header-anchor" href="#meld"><span>Meld</span></a></h2><table><thead><tr><th>Name</th><th>Parameters</th><th>Return Value</th><th>Notes</th></tr></thead><tbody><tr><td>GetMeld</td><td>None</td><td>[][]*model.Meld</td><td>Raw meld data (4 seats)</td></tr><tr><td>Melds</td><td>None</td><td>[][][]string</td><td>Meld tiles converted to string format</td></tr><tr><td>AddMeld</td><td>index int, v ...*model.Meld</td><td>None</td><td>Append meld(s) for seat <code>index</code></td></tr><tr><td>AddMinkan</td><td>index int, tiles []string, redFive bool, resetRedFive bool</td><td>None</td><td>Upgrade matching pon to minkan</td></tr><tr><td>ResetMeld</td><td>None</td><td>None</td><td>Reset meld container</td></tr></tbody></table><h2 id="meld-discard-position" tabindex="-1"><a class="header-anchor" href="#meld-discard-position"><span>Meld Discard Position</span></a></h2><table><thead><tr><th>Name</th><th>Parameters</th><th>Return Value</th><th>Notes</th></tr></thead><tbody><tr><td>GetMeldDiscardAt</td><td>None</td><td>[][]string</td><td>Discards related to chi/pon timing</td></tr><tr><td>AddMeldDiscardAt</td><td>index int, v ...string</td><td>None</td><td>Append record(s)</td></tr><tr><td>RemoveMeldDiscardAt</td><td>index int, v string</td><td>None</td><td>Remove one matching record</td></tr><tr><td>RemoveMeldDiscardAts</td><td>index int, v ...string</td><td>None</td><td>Remove each record once</td></tr><tr><td>RemoveMeldDiscardAts4</td><td>index int, v string</td><td>None</td><td>Remove up to 4 copies across normal/aka/deaka</td></tr><tr><td>ResetMeldDiscardAt</td><td>None</td><td>None</td><td>Clear records for all seats</td></tr></tbody></table><h2 id="riichi-and-ippatsu" tabindex="-1"><a class="header-anchor" href="#riichi-and-ippatsu"><span>Riichi And Ippatsu</span></a></h2><table><thead><tr><th>Name</th><th>Parameters</th><th>Return Value</th><th>Notes</th></tr></thead><tbody><tr><td>SetRiichi</td><td>index int, v bool, t bool</td><td>None</td><td>Set riichi and riichi-tsumogiri state</td></tr><tr><td>SetRiichiAccept</td><td>index int, v bool</td><td>None</td><td>Set riichi accept flag</td></tr><tr><td>ResetRiichi</td><td>None</td><td>None</td><td>Reset riichi-related arrays</td></tr><tr><td>GetRiichi</td><td>None</td><td>[]bool</td><td>Riichi flags (4 seats)</td></tr><tr><td>GetRiichiAt</td><td>None</td><td>[]int</td><td>Riichi position in global discard stream</td></tr><tr><td>GetRiichiTsumogiri</td><td>None</td><td>[]bool</td><td>Whether riichi discard was tsumogiri</td></tr><tr><td>GetCanIppatsu</td><td>None</td><td>[]bool</td><td>Ippatsu availability flags</td></tr><tr><td>ResetRiichiAt</td><td>None</td><td>None</td><td>Reset <code>RiichiAt</code> to <code>[-1,-1,-1,-1]</code></td></tr><tr><td>ResetCanIppatsu</td><td>None</td><td>None</td><td>Reset ippatsu flags</td></tr><tr><td>ResetTenhouFlags</td><td>None</td><td>None</td><td>Reset Tenhou ippatsu helper flags</td></tr><tr><td>ResetCanIppatsuIndex</td><td>i int</td><td>None</td><td>Clear one seat&#39;s ippatsu + Tenhou flag</td></tr><tr><td>ResetLatestGlobalDiscardAt</td><td>None</td><td>None</td><td>Reset latest global discard indexes</td></tr></tbody></table><h2 id="operations" tabindex="-1"><a class="header-anchor" href="#operations"><span>Operations</span></a></h2><table><thead><tr><th>Name</th><th>Parameters</th><th>Return Value</th><th>Notes</th></tr></thead><tbody><tr><td>IsCanOperations</td><td>None</td><td>bool</td><td>Whether operation list is non-empty</td></tr><tr><td>IsOperation</td><td>target uint32</td><td>bool</td><td>Whether target op exists</td></tr><tr><td>OperationCombination</td><td>target uint32</td><td>[]string</td><td>Return matched operation combinations</td></tr><tr><td>IsCan</td><td>target int</td><td>bool</td><td>Whether target op exists (<code>int</code> version)</td></tr><tr><td>SetOperationList</td><td>v []*lq.OptionalOperation</td><td>None</td><td>Setter kept for yaegi compatibility</td></tr></tbody></table><h2 id="rules-and-win-utilities" tabindex="-1"><a class="header-anchor" href="#rules-and-win-utilities"><span>Rules And Win Utilities</span></a></h2><table><thead><tr><th>Name</th><th>Parameters</th><th>Return Value</th><th>Notes</th></tr></thead><tbody><tr><td>IsLiqi3</td><td>None</td><td>bool</td><td>Whether it is three-player mahjong</td></tr><tr><td>IsRoundWind</td><td>string</td><td>bool</td><td>Whether the tile is the round wind</td></tr><tr><td>IsSelfWind</td><td>string</td><td>bool</td><td>Whether the tile is the player&#39;s own wind</td></tr><tr><td>IsCanWin</td><td>None</td><td>bool</td><td>Whether the player can win</td></tr></tbody></table><h2 id="assassin-tile-remaining-helpers" tabindex="-1"><a class="header-anchor" href="#assassin-tile-remaining-helpers"><span>Assassin / Tile Remaining Helpers</span></a></h2><table><thead><tr><th>Name</th><th>Parameters</th><th>Return Value</th><th>Notes</th></tr></thead><tbody><tr><td>ResetAssassin</td><td>None</td><td>None</td><td>Reset internal tile-remaining counters</td></tr><tr><td>AssassinTileCount</td><td>t string</td><td>None</td><td>Consume one tile from counters</td></tr><tr><td>AssassinTileCounts</td><td>tiles []string</td><td>None</td><td>Consume multiple tiles</td></tr><tr><td>RemainTileCount</td><td>tile string</td><td>int</td><td>Remaining copies for one tile</td></tr></tbody></table><h2 id="seat-conversion" tabindex="-1"><a class="header-anchor" href="#seat-conversion"><span>Seat Conversion</span></a></h2><table><thead><tr><th>Name</th><th>Parameters</th><th>Return Value</th><th>Notes</th></tr></thead><tbody><tr><td>ToLocalSeat</td><td>seat int</td><td>int</td><td>Absolute seat -&gt; local seat</td></tr><tr><td>ToLocalSeat2</td><td>seat int, tw int</td><td>int</td><td>Absolute seat -&gt; local seat with custom <code>tw</code></td></tr><tr><td>ToPositionSeat</td><td>seat int</td><td>int</td><td>Local seat -&gt; absolute seat</td></tr><tr><td>ToPositionSeat2</td><td>seat int, tw int</td><td>int</td><td>Local seat -&gt; absolute seat with custom <code>tw</code></td></tr></tbody></table><h2 id="link-account-helpers" tabindex="-1"><a class="header-anchor" href="#link-account-helpers"><span>Link / Account Helpers</span></a></h2><table><thead><tr><th>Name</th><th>Parameters</th><th>Return Value</th><th>Notes</th></tr></thead><tbody><tr><td>EncodeAccountId</td><td>None</td><td>int</td><td>Encode account id used in Majsoul paipu link</td></tr><tr><td>SetLastLink</td><td>None</td><td>None</td><td>Build and set <code>LastLink</code> from current platform/uuid</td></tr><tr><td>SetUuid</td><td>v string</td><td>None</td><td>Setter kept for yaegi compatibility</td></tr><tr><td>AddEarlyOutside</td><td>index int, tile string</td><td>None</td><td>Add one early outside tile</td></tr><tr><td>ResetEarlyOutside</td><td>None</td><td>None</td><td>Reset early outside tile record</td></tr><tr><td>ResetScore</td><td>None</td><td>None</td><td>Reset score to <code>[25000,25000,25000,25000]</code></td></tr></tbody></table><h2 id="direct-field-access" tabindex="-1"><a class="header-anchor" href="#direct-field-access"><span>Direct Field Access</span></a></h2><p>The following fields are exported and can be accessed directly via <code>gamestate.Inst().XXX</code>:</p><table><thead><tr><th>Name</th><th>Type</th><th>Notes</th></tr></thead><tbody><tr><td>HandLock</td><td>sync.Mutex</td><td>Hand tile mutex</td></tr><tr><td>HandTile</td><td>[]string</td><td>Player hand tiles</td></tr><tr><td>LeftLock</td><td>sync.Mutex</td><td>Left-tile mutex</td></tr><tr><td>LeftTile</td><td>[]string</td><td>Left-tile stream</td></tr><tr><td>GlobalLeftTile</td><td>[]string</td><td>Global left-tile stream</td></tr><tr><td>DiscardLock</td><td>sync.Mutex</td><td>Discard mutex</td></tr><tr><td>DiscardTile</td><td>[][]string</td><td>Discard tiles per seat</td></tr><tr><td>MeldLock</td><td>sync.Mutex</td><td>Meld mutex</td></tr><tr><td>Meld</td><td>[][]*model.Meld</td><td>Melds per seat</td></tr><tr><td>MeldDiscardAtLock</td><td>sync.Mutex</td><td>Meld-discard-at mutex</td></tr><tr><td>MeldDiscardAt</td><td>[][]string</td><td>Meld discard records</td></tr><tr><td>DoraLock</td><td>sync.Mutex</td><td>Dora mutex</td></tr><tr><td>Dora</td><td>[]string</td><td>Dora indicators</td></tr><tr><td>Riichi</td><td>[]bool</td><td>Riichi flags</td></tr><tr><td>RiichiAccept</td><td>[]bool</td><td>Riichi accepted flags</td></tr><tr><td>RiichiTsumogiri</td><td>[]bool</td><td>Riichi tsumogiri flags</td></tr><tr><td>RiichiAt</td><td>[]int</td><td>Riichi positions in global stream</td></tr><tr><td>LatestDiscard</td><td>int</td><td>Latest discard seat</td></tr><tr><td>LatestGlobalDiscardAt</td><td>[]int</td><td>Latest global discard index per seat</td></tr><tr><td>CanIppatsu</td><td>[]bool</td><td>Ippatsu flags</td></tr><tr><td>TenhouIppatsuFlag</td><td>[]bool</td><td>Tenhou helper flags</td></tr><tr><td>EarlyOutside</td><td>[][]string</td><td>Early outside tiles per seat</td></tr><tr><td>IsOnChiPon</td><td>bool</td><td>Current state is chi/pon flow</td></tr><tr><td>IsOnBabei</td><td>bool</td><td>Current state is babei flow</td></tr><tr><td>Chang</td><td>int</td><td>Current round wind: 0=East, 1=South, 2=West</td></tr><tr><td>Ben</td><td>int</td><td>Current honba count</td></tr><tr><td>Ju</td><td>int</td><td>Current hand number</td></tr><tr><td>Oya</td><td>int</td><td>Dealer seat number</td></tr><tr><td>Score</td><td>[]int32</td><td>Player scores</td></tr><tr><td>LeftTileCount</td><td>int</td><td>Remaining tile count</td></tr><tr><td>IsSelfChiPon</td><td>bool</td><td>Whether the player is in chii/pon</td></tr><tr><td>IsSelfDeal</td><td>bool</td><td>Whether the player just drew a tile (used for last tile offset)</td></tr><tr><td>OperationList</td><td>[]*lq.OptionalOperation</td><td>Current operation list</td></tr><tr><td>UserUseMouse</td><td>bool</td><td>Whether the user is using the mouse</td></tr><tr><td>LastLink</td><td>string</td><td>Last game replay link</td></tr><tr><td>Uuid</td><td>string</td><td>Game UUID</td></tr><tr><td>Mode</td><td>int32</td><td>Game mode</td></tr><tr><td>OnTenhouLobby</td><td>bool</td><td>Whether on Tenhou lobby</td></tr><tr><td>OnTenhouGame</td><td>bool</td><td>Whether on Tenhou game</td></tr><tr><td>Tw</td><td>int</td><td>Tenhou seat number</td></tr><tr><td>LastLevel</td><td>uint32</td><td>Last known level id</td></tr><tr><td>Level</td><td>string</td><td>Player level</td></tr><tr><td>LevelScore</td><td>uint32</td><td>Player level score</td></tr><tr><td>Level3</td><td>string</td><td>Three-player level</td></tr><tr><td>Level3Score</td><td>uint32</td><td>Three-player level score</td></tr><tr><td>IsInSyncGame</td><td>bool</td><td>Whether this game is a reconnection game</td></tr><tr><td>ResAuthGame</td><td>*lq.ResAuthGame</td><td>Auth game payload</td></tr><tr><td>Round</td><td>*lq.ActionNewRound</td><td>Latest new-round action payload</td></tr><tr><td>RoundEndData</td><td>*RoundEnd</td><td>Last round-end snapshot</td></tr><tr><td>Tile37</td><td>[]int</td><td>Tile remaining counter (37-index style)</td></tr><tr><td>TilesSeen</td><td>[34]uint8</td><td>Seen tile counter (34-index style)</td></tr><tr><td>Tsumogiri3</td><td>[][]*Tsumogiri</td><td>Tsumogiri log for 3p</td></tr><tr><td>IsChangeEngine</td><td>bool</td><td>Whether engine was switched</td></tr><tr><td>IsRiichiMoment</td><td>bool</td><td>Whether it&#39;s a riichi moment</td></tr><tr><td>TingPaiInfo</td><td>[]*lq.TingPaiInfo</td><td>Tingpai info payload</td></tr><tr><td>TingPaiDiscardInfo</td><td>[]*lq.TingPaiDiscardInfo</td><td>Tingpai-discard info payload</td></tr><tr><td>Uid</td><td>string</td><td>Logged-in account UID</td></tr><tr><td>LastDeal</td><td>string</td><td>Last drawn tile</td></tr><tr><td>SeatList</td><td>[]int</td><td>Seat list</td></tr><tr><td>Liqi3</td><td>bool</td><td>RiichiCity 3-player flag</td></tr></tbody></table>',48)])])}const h=d(n,[["render",o]]),l=JSON.parse('{"path":"/en/auto/majsoul/gamestate/basic-gamestate.html","title":"Basic","lang":"en-US","frontmatter":{"title":"Basic"},"git":{},"filePathRelative":"en/auto/majsoul/gamestate/basic-gamestate.md"}');export{h as comp,l as data};
